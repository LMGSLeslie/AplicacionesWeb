<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Pantalla Principal</title>
    <script src="../Scripts/jquery-3.0.0.min.js"></script>
    <link href="../Content/bootstrap.min.css" rel="stylesheet" />
    <script src="../Scripts/bootstrap.min.js"></script>

    <link rel="stylesheet" href="../Content/jquery.Jcrop.css" type="text/css" />
    <script src="../Scripts/jquery.Jcrop.js"></script>
    <!-- add scripts -->
    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.Jcrop.min.js"></script>
    <script src="js/script.js"></script>

    <script type="text/javascript">

        // convert bytes into friendly format
        function bytesToSize(bytes) {
            var sizes = ['Bytes', 'KB', 'MB'];
            if (bytes == 0) return 'n/a';
            var i = parseInt(Math.floor(Math.log(bytes) / Math.log(1024)));
            return (bytes / Math.pow(1024, i)).toFixed(1) + ' ' + sizes[i];
        };
        // check for selected crop region
        function checkForm() {
            if (parseInt($('#w').val())) return true;
            $('.error').html('Please select a crop region and then press Upload').show();
            return false;
        };
        // update info by cropping (onChange and onSelect events handler)
        function updateInfo(e) {
            $('#x1').val(e.x);
            $('#y1').val(e.y);
            $('#x2').val(e.x2);
            $('#y2').val(e.y2);
            $('#w').val(e.w);
            $('#h').val(e.h);
        };
        // clear info by cropping (onRelease event handler)
        function clearInfo() {
            $('.info #w').val('');
            $('.info #h').val('');
        };
        // Create variables (in this scope) to hold the Jcrop API and image size
        var jcrop_api, boundx, boundy;
        function fileSelectHandler() {
            // get selected file
            var oFile = $('#image_file')[0].files[0];
            // hide all errors
            $('.error').hide();
            // check for image type (jpg and png are allowed)
            var rFilter = /^(image\/jpeg|image\/png)$/i;
            if (!rFilter.test(oFile.type)) {
                $('.error').html('Please select a valid image file (jpg and png are allowed)').show();
                return;
            }
            // check for file size

            // preview element
            var oImage = document.getElementById('preview');
            // prepare HTML5 FileReader
            var oReader = new FileReader();
            oReader.onload = function (e) {
                // e.target.result contains the DataURL which we can use as a source of the image
                oImage.src = e.target.result;
                $('#preview').width(637.5).height(825);
                oImage.onload = function () { // onload event handler
                   
                    
                    // destroy Jcrop if it is existed
                    if (typeof jcrop_api != 'undefined') {
                        jcrop_api.destroy();
                        jcrop_api = null;
                        $('#preview').width(637.5);
                        $('#preview').height(825);
                    }
                    setTimeout(function () {
                        // initialize Jcrop
                        $('#preview').Jcrop({
                            minSize: [32, 32], // min crop size
                            bgFade: true, // use fade effect
                            bgOpacity: .3, // fade opacity
                            onChange: updateInfo,
                            onSelect: updateInfo,
                            onRelease: clearInfo
                        }, function () {
                            // use the Jcrop API to get the real image size
                            var bounds = this.getBounds();
                            boundx = bounds[0];
                            boundy = bounds[1];
                            // Store the Jcrop API in the jcrop_api variable
                            jcrop_api = this;
                        });
                    }, 3000);
                };
            };
            // read selected file as DataURL
            oReader.readAsDataURL(oFile);
        }


    </script>
    <style>
        button {
            background-color: #665e5e;
            color: white;
            width: 250px;
        }

        input[type="file"] {
            display: none;
        }

        .btn btn-dark btn-outline-dark {
            width: 250px;
        }

        .col-1 {
            margin-bottom: -99999px;
        }

        .container-fluid {
            min-height: 100%;
            overflow: hidden;
        }

        body, html {
            height: 100%;
        }

        .responsive-width {
            font-size: 1.3vw;
        }
    </style>
</head>
<body>
    <div style="background-color: black"><img src="http://blitzrdigital.com/wp-content/uploads/2017/01/fingerprint.png" alt="huellita" width="100" height="70"></div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-1" style="background-color:black">
                <br />
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">MñI</button>
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">AI</button>
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">MI</button>
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">II</button>
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">PI</button>
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">PlI</button>
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">MñD</button>
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">AD</button>
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">MD</button>
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">ID</button>
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">PD</button>
                <button class="btn btn-dark btn-outline-dark responsive-width" style="width:100%">PlD</button>
            </div>
            <div class="col-8">
                <img id="preview" alt="UPLOAD YOUR MODEL" class="img-responsive" style="overflow:scroll">
                <form id="coords" class="coords" onsubmit="return false;" action="http://example.com/post.php">
                    <div class="inline-labels">
                        <label>X1 <input type="text" size="4" id="x1" name="x1" /></label>
                        <label>Y1 <input type="text" size="4" id="y1" name="y1" /></label>
                        <label>X2 <input type="text" size="4" id="x2" name="x2" /></label>
                        <label>Y2 <input type="text" size="4" id="y2" name="y2" /></label>
                        <label>W <input type="text" size="4" id="w" name="w" /></label>
                        <label>H <input type="text" size="4" id="h" name="h" /></label>
                    </div>
                </form>
            </div>
            <div class="col-3">
                <br />
                <div class="row">
                    <a href="../Pages/SeleccionPlantilla.html" style=" width:95%" class="btn btn-dark btn-outline-dark">CAMBIAR PLANTILLA</a>
                </div>
                <br />
                <div class="row">
                    <button type="button" style="width:95%" class="btn btn-dark btn-outline-dark">GUARDAR PLANTILLA</button>
                </div>
                <br />
                <div class="row">
                    <a href="/Pages/SeleccionPersona.aspx" class="btn btn-dark btn-outline-dark" style=" width:95%">ASIGNAR HUELLAS</a>
                </div>
                <br />
                <div class="row">
                    <label class="btn btn-dark btn-outline-dark" style="width:95%">
                        <input id="image_file" type="file" onchange="fileSelectHandler()" />CARGAR HUELLAS
                    </label>
                </div>
            </div>
        </div>

    </div>

</body>
</html>